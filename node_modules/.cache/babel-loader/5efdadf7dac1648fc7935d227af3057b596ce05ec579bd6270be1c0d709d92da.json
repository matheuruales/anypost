{"ast":null,"code":"var _jsxFileName = \"/Users/matheu/u/anypost/src/components/posts/Posts.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { postsAPI, mediaAPI } from '../../services/api';\nimport './Posts.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Posts() {\n  _s();\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [newPost, setNewPost] = useState({\n    text: '',\n    mediaId: null\n  });\n  useEffect(() => {\n    const fetchPosts = async () => {\n      try {\n        const {\n          data\n        } = await postsAPI.getAll();\n        setPosts(data || []);\n      } catch (e) {\n        console.error('Error fetching posts', e);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchPosts();\n  }, []);\n  const handleCreate = async e => {\n    e.preventDefault();\n    try {\n      const {\n        data\n      } = await postsAPI.create(newPost);\n      setPosts(prev => [data, ...prev]);\n      setNewPost({\n        text: '',\n        mediaId: null\n      });\n    } catch (e) {\n      alert('No se pudo crear el post');\n    }\n  };\n  const handleUpload = async e => {\n    var _e$target$files;\n    const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (!file) return;\n    const fd = new FormData();\n    fd.append('file', file);\n    try {\n      const {\n        data\n      } = await mediaAPI.upload(fd);\n      setNewPost(p => ({\n        ...p,\n        mediaId: data.id\n      }));\n    } catch (e) {\n      alert('No se pudo subir el archivo');\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Cargando publicaciones\\u2026\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"posts-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Publicaciones\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"post-form\",\n      onSubmit: handleCreate,\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"\\xBFQu\\xE9 quieres publicar?\",\n        value: newPost.text,\n        onChange: e => setNewPost({\n          ...newPost,\n          text: e.target.value\n        }),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-form__row\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*,video/*\",\n          onChange: handleUpload\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Crear\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"posts-list\",\n      children: [posts.map(p => {\n        var _p$status, _p$status$toLowerCase;\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"post-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"post-head\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: `badge badge--${((_p$status = p.status) === null || _p$status === void 0 ? void 0 : (_p$status$toLowerCase = _p$status.toLowerCase) === null || _p$status$toLowerCase === void 0 ? void 0 : _p$status$toLowerCase.call(_p$status)) || 'draft'}`,\n              children: p.status || 'DRAFT'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 15\n            }, this), p.scheduledAt && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"scheduled-at\",\n              children: [\"\\u23F0 \", new Date(p.scheduledAt).toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: p.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), p.mediaUrl && (p.mediaUrl.match(/\\.(mp4|webm|ogg)$/i) ? /*#__PURE__*/_jsxDEV(\"video\", {\n            src: p.mediaUrl,\n            controls: true,\n            className: \"media\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n            src: p.mediaUrl,\n            alt: \"\",\n            className: \"media\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 19\n          }, this))]\n        }, p.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this);\n      }), posts.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No hay publicaciones todav\\xEDa.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 32\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n_s(Posts, \"TWzvxmu+6WJubUKjOvBV1r8wAhs=\");\n_c = Posts;\nvar _c;\n$RefreshReg$(_c, \"Posts\");","map":{"version":3,"names":["React","useEffect","useState","postsAPI","mediaAPI","jsxDEV","_jsxDEV","Posts","_s","posts","setPosts","loading","setLoading","newPost","setNewPost","text","mediaId","fetchPosts","data","getAll","e","console","error","handleCreate","preventDefault","create","prev","alert","handleUpload","_e$target$files","file","target","files","fd","FormData","append","upload","p","id","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onSubmit","placeholder","value","onChange","required","type","accept","map","_p$status","_p$status$toLowerCase","status","toLowerCase","call","scheduledAt","Date","toLocaleString","mediaUrl","match","src","controls","alt","length","_c","$RefreshReg$"],"sources":["/Users/matheu/u/anypost/src/components/posts/Posts.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { postsAPI, mediaAPI } from '../../services/api';\nimport './Posts.css';\n\nexport default function Posts() {\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [newPost, setNewPost] = useState({ text: '', mediaId: null });\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      try {\n        const { data } = await postsAPI.getAll();\n        setPosts(data || []);\n      } catch (e) {\n        console.error('Error fetching posts', e);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchPosts();\n  }, []);\n\n  const handleCreate = async (e) => {\n    e.preventDefault();\n    try {\n      const { data } = await postsAPI.create(newPost);\n      setPosts((prev) => [data, ...prev]);\n      setNewPost({ text: '', mediaId: null });\n    } catch (e) {\n      alert('No se pudo crear el post');\n    }\n  };\n\n  const handleUpload = async (e) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    const fd = new FormData();\n    fd.append('file', file);\n    try {\n      const { data } = await mediaAPI.upload(fd);\n      setNewPost((p) => ({ ...p, mediaId: data.id }));\n    } catch (e) {\n      alert('No se pudo subir el archivo');\n    }\n  };\n\n  if (loading) return <p>Cargando publicaciones…</p>;\n\n  return (\n    <div className=\"posts-page\">\n      <h1>Publicaciones</h1>\n\n      <form className=\"post-form\" onSubmit={handleCreate}>\n        <textarea\n          placeholder=\"¿Qué quieres publicar?\"\n          value={newPost.text}\n          onChange={(e) => setNewPost({ ...newPost, text: e.target.value })}\n          required\n        />\n        <div className=\"post-form__row\">\n          <input type=\"file\" accept=\"image/*,video/*\" onChange={handleUpload} />\n          <button type=\"submit\">Crear</button>\n        </div>\n      </form>\n\n      <ul className=\"posts-list\">\n        {posts.map((p) => (\n          <li key={p.id} className=\"post-item\">\n            <div className=\"post-head\">\n              <span className={`badge badge--${p.status?.toLowerCase?.() || 'draft'}`}>\n                {p.status || 'DRAFT'}\n              </span>\n              {p.scheduledAt && <span className=\"scheduled-at\">⏰ {new Date(p.scheduledAt).toLocaleString()}</span>}\n            </div>\n            <p>{p.text}</p>\n            {p.mediaUrl && (\n              p.mediaUrl.match(/\\.(mp4|webm|ogg)$/i)\n                ? <video src={p.mediaUrl} controls className=\"media\" />\n                : <img src={p.mediaUrl} alt=\"\" className=\"media\" />\n            )}\n          </li>\n        ))}\n        {posts.length === 0 && <p>No hay publicaciones todavía.</p>}\n      </ul>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}